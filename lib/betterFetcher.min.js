!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("betterFetcher",[],t):"object"==typeof exports?exports.betterFetcher=t():e.betterFetcher=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){t.prepareData=function(e,n,r,o,i){var a;return n=t.checkDefaults(n,r,o,i),(a=e)===Object(a)&&(e=JSON.stringify(e)),n.init.body=e,n},t.mergeObjects=function(e,t){var n={};return Object.keys(e).forEach(t=>n[t]=e[t]),Object.keys(t).forEach(e=>n[e]=t[e]),n},t.checkDefaults=function(e,t,n,r){var o={};return Object.keys(n).forEach(e=>o[e]=n[e]),Object.keys(e).forEach(t=>o[t]=e[t]),o.init?o.init.method=t:o.init={method:t},o.init.headers||(o.init.headers={}),o=function(e,t,n){var r={};e.init.headers["Content-type"]||"POST"!==t&&"PUT"!==t||(r={"Content-type":"application/json"});Object.keys(n.ALL).forEach(e=>r[e]=n.ALL[e]),Object.keys(n[t]).forEach(e=>r[e]=n[t][e]),e.init.headers&&Object.keys(e.init.headers).forEach(t=>r[t]=e.init.headers[t]);Object.keys(r).length>0&&(e.init.headers=r);return e}(o,t,r)},t.createUrl=function(e,t){return t.params&&("/"!==e[e.length-1]&&(e+="/"),e+=function(e){for(var t="?",n=Object.keys(e),r=0;r<n.length;r++)r===n.length-1?t+=n[r]+"="+e[n[r]]+"&":t=t+n[r]+"="+e[n[r]]+"&";return t=t.substring(0,t.length-1)}(t.params)),e},t.checkValidType=function(e){return"arrayBuffer"===e||"blob"===e||"formData"===e||"json"===e||"text"===e||"auto"===e},t.checkIfValidCredentials=function(e){return"omit"===e||"same-origin"===e||"include"===e},t.timeoutPromise=function(e,t){return new Promise((n,r)=>{const o=setTimeout(()=>{r(new Error("Request Timeout"))},e);t.then(e=>{clearTimeout(o),n(e)},e=>{clearTimeout(o),r(e)})})},t.resolveDataType=function(e){var t=e.headers.get("content-type");switch(t){case"application/json":return"json";case"text/html":case"text/plain":case"text/javascript":return"text";case"multipart/form-data":return"formData";default:if(!(t&&t instanceof String))return"none";if(t.includes("image")||t.includes("audio")||t.includes("video"))return"blob"}}},function(e,t,n){const{handleResponse:r,handleNetworkResponse:o,handleCacheResponse:i}=n(2),{checkValidType:a,checkIfValidCredentials:u,createUrl:c,timeoutPromise:s,checkDefaults:f,prepareData:l,mergeObjects:d}=n(0);t=e.exports={};var h="",p={GET:{},POST:{},PUT:{},DELETE:{},ALL:{}},m={timeout:5e3,init:{credentials:"same-origin"},dataType:"auto"};function y(e,t){return e=c(e,t),s(t.timeout,fetch(e,t.init)).then(function(e){if(e.ok)return e;throw e})}t.setCacheName=function(e){h=e},t.getCacheName=function(){return h},t.setDefaultHeaders=function(e,t){p[t]=e},t.getDefaultHeaders=function(e){return p[e]},t.setDefaultOptions=function(e){!function(e){if(e.dataType&&!a(e.dataType))throw new Error("Attempting to set invalid data type");if(e.timeout&&isNaN(e.timeout))throw new Error("Timeout must be a number (in ms)");if(e.init&&!(e.init instanceof Object))throw new Error("Init propery must be a json object");if(e.init&&e.init.credentials&&!u(e.init.credentials))throw new Error("Attempting to set invalid credential policy");if(e.validator&&!(e.validator instanceof Function))throw new Error("Validator must be a function")}(e),m=d(e,m)},t.get=function(e,t=m,n){if(void 0===e)return Promise.reject(new Error("Missing url parameter in get request"));if(t.mock)return t.mock;if((t=f(t,"GET",m,p)).dataType&&!a(t.dataType))return Promise.reject(new Error("Invalid data type"));e=c(e,t),t.url=e;var u=s(t.timeout,fetch(e,t.init)).then(function(e){return r(e,t.validator)}).then(function(e){return o(e,t,n)});return t.useLocalData instanceof Function?n(t.useLocalData(new Request(e,t.init))):t.useCache&&function(e,t,n){return t.matchAll,caches.match(e).then(r).then(function(e){return i(e,t,n)})}(e,t,n).catch(function(){}),u},t.post=function(e,t,n=m){return y(e,n=l(t,n,"POST",m,p))},t.put=function(e,t,n=m){return y(e,n=l(t,n,"PUT",m,p))},t.delete=function(e,t=m){return y(e,t=f(t,"DELETE",m,p))},t.createUrl=c},function(e,t,n){const{resolveDataType:r}=n(0);var o=new Map,i=new Map;function a(e,t){switch(t.dataType.toLowerCase()){case"json":return e.json();case"blob":return e.blob();case"arraybuffer":return e.arrayBuffer();case"formdata":return e.formData();case"text":return e.text();case"auto":return t.dataType=r(e),a(e,t);default:return Promise.resolve(e)}}function u(e){i.get(e)?i.delete(e):o.set(e,!0)}t.handleResponse=function(e,t){if(!e)return new Promise(function(e,t){t("No response")});if(t&&!t(e))throw e;if(t||e.ok)return e;throw e},t.handleNetworkResponse=function(e,t,n){return t.useCache?"none"===t.dataType.toLowerCase()?(u(t.url),void(t.handleNetworkResponse instanceof Function?t.handleNetworkResponse(e):n(e))):function(e,t,n){a(e,t).then(function(e){o.set(t.url,!0),t.handleNetworkResponse instanceof Function?t.handleNetworkResponse(e):n(e)})}(e,t,n).then(function(e){u(t.url),Promise.resolve(e)}):a(e,t)},t.handleCacheResponse=function(e,t,n){if(!o.get(t.url))return"none"!==t.dataType.toLowerCase()?function(e,t,n){return a(e,t).then(function(e){t.handleCachedResponse instanceof Function?t.handleCachedResponse(e):n(e)})}(e,t,n).then(function(e){return i.set(t.url,!0),Promise.resolve(e)}):(i.set(t.url,!0),void(t.handleCachedResponse instanceof Function?t.handleCachedResponse(e):n(e)));o.delete(t.url)}}])});
//# sourceMappingURL=betterFetcher.min.js.map