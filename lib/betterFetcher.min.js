!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("betterFetcher",[],t):"object"==typeof exports?exports.betterFetcher=t():e.betterFetcher=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){t=e.exports={};var n="",r=5e3,o="same-origin",i={GET:{},POST:{},PUT:{},DELETE:{},ALL:{}},u="",a=!1;function c(e,t){return m(t.timeout||r,fetch(e,t.init)).then(function(e){if(e.ok)return e;throw e})}function f(e,t,n){var r;return t=s(t,n),(r=e)===Object(r)&&(e=JSON.stringify(e)),t.init.body=e,t}function s(e,t){return e||(e={}),e.init||(e.init={}),e.init.headers||(e.init.headers={}),e.init.method||(e.init.method=t),e.init.defaultCredentials||(e=function(e){return e.init.defaultCredentials=o,e}(e)),e=function(e,t){var n={};e.init.headers["Content-type"]||"POST"!==t&&"PUT"!==t||(n={"Content-type":"application/json"});Object.keys(i.ALL).forEach(e=>n[e]=i.ALL[e]),Object.keys(i[t]).forEach(e=>n[e]=i[t][e]),e.init.headers&&Object.keys(e.init.headers).forEach(t=>n[t]=e.init.headers[t]);Object.keys(n).length>0&&(e.init.headers=n);return e}(e,t)}function l(e){if(e){if(e.ok)return e;throw e}return new Promise(function(e,t){t("No response")})}function d(e,t,n){if(!a)return t.dataType?p(e,t).then(function(e){t.handleCachedResponse instanceof Function?t.handleCachedResponse(e):n(e)}):void(t.handleCachedResponse instanceof Function?t.handleCachedResponse(e):n(e))}function p(e,t){switch(t.dataType){case"json":return e.json();case"blob":return e.blob();case"arrayBuffer":return e.arrayBuffer();case"formData":return e.formData();case"text":return e.text();default:return e}}function h(e){return"arrayBuffer"===e||"blob"===e||"formData"===e||"json"===e||"text"===e}function y(e){return"omit"===e||"same-origin"===e||"include"===e}function m(e,t){return new Promise((n,r)=>{const o=setTimeout(()=>{r(new Error("Request Timeout"))},e);t.then(e=>{clearTimeout(o),n(e)},e=>{clearTimeout(o),r(e)})})}t.setCacheName=function(e){n=e},t.getCacheName=function(){return n},t.setDefaultTimeout=function(e){if(isNaN(e))throw new Error("Cannot set timeout to be a non-number");r=e},t.getDefaultTimeout=function(){return r},t.setDefaultCredentialsPolicy=function(e){if(!y(e))throw new Error("Attempting to set invalid credential policy: "+e);o=e},t.getDefaultCredentialsPolicy=function(){return o},t.setDefaultHeaders=function(e,t){i[t]=e},t.getDefaultHeaders=function(e){return i[e]},t.setDefaultDataType=function(e){if(!h(e))throw new Error("Attempting to set dataType to invalid type: "+e);u=e},t.getDefaultDataType=function(){return u},t.get=function(e,t={},n){if(void 0===e)return Promise.reject(new Error("Missing url parameter in get request"));if(a=!1,(t=s(t,"GET")).dataType&&!h(t.dataType))return Promise.reject(new Error("Invalid data type"));if(t.credentials&&!y(t.dataType))return Promise.reject(new Error("Invalid credential policy set"));e=function(e,t){t.params&&("/"!==e[e.length-1]&&(e+="/"),e+=function(e){for(var t="?",n=Object.keys(e),r=0;r<n.length;r++)r!==n.length-1?t+=e[n[r]]+"&":t+=t+=e[n[r]];return t}(t.params));return e}(e,t);var o=m(t.timeout||r,fetch(e,t.init)).then(l).then(function(e){return a=!0,function(e,t,n){if(!t.useCache)return p(e,t);t.dataType?p(e,t).then(function(e){a=!0,t.handleNetworkResponse instanceof Function?t.handleNetworkResponse(e):n(e)}):t.handleNetworkResponse instanceof Function?t.handleNetworkResponse(e):n(e)}(e,t,n)});return t.useCache&&function(e,t,n){return t.matchAll,caches.match(e).then(l).then(function(e){return d(e,t,n)})}(e,t,n).catch(function(){}),o},t.post=function(e,t,n){return c(e,n=f(t,n,"POST"))},t.put=function(e,t,n){return c(e,n=f(t,n,"PUT"))},t.delete=function(e,t){return c(e,t=s(t,"DELETE"))}}])});
//# sourceMappingURL=betterFetcher.min.js.map