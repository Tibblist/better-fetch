{"version":3,"sources":["webpack://betterFetcher/webpack/universalModuleDefinition","webpack://betterFetcher/webpack/bootstrap","webpack://betterFetcher/./src/utils.js","webpack://betterFetcher/./src/better-fetcher.js","webpack://betterFetcher/./src/responseHandler.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","prepareData","data","options","type","defaultOptions","defaultHeaders","obj","checkDefaults","JSON","stringify","init","body","mergeObjects","obj1","obj2","combinedObj","keys","forEach","newOptions","method","headers","header","Content-type","ALL","length","changeHeaders","createUrl","url","params","queryString","substring","createQueryString","checkValidType","checkIfValidCredentials","timeoutPromise","ms","promise","Promise","resolve","reject","timeoutId","setTimeout","Error","then","res","clearTimeout","err","resolveDataType","response","String","includes","handleResponse","handleNetworkResponse","handleCacheResponse","cacheName","GET","POST","PUT","DELETE","timeout","credentials","dataType","timeoutFetch","fetch","ok","setCacheName","getCacheName","setDefaultHeaders","getDefaultHeaders","setDefaultOptions","isNaN","validator","Function","verifyOptions","callback","undefined","mock","networkCall","jsonp","script","document","createElement","Math","round","random","match","src","removeChild","appendChild","useLocalData","Request","useCache","matchAll","caches","checkCaches","catch","post","put","delete","networkMap","Map","cacheMap","parseResponseData","toLowerCase","json","blob","arrayBuffer","formData","text","setNetworkMap","set","handleNetworkResponseData","handleCachedResponse","handleCacheResponseData"],"mappings":"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","file":"betterFetcher.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"betterFetcher\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"betterFetcher\"] = factory();\n\telse\n\t\troot[\"betterFetcher\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","exports.prepareData = function(\n  data,\n  options,\n  type,\n  defaultOptions,\n  defaultHeaders\n) {\n  options = exports.checkDefaults(\n    options,\n    type,\n    defaultOptions,\n    defaultHeaders\n  );\n  if (isObject(data)) {\n    data = JSON.stringify(data);\n  }\n  options.init.body = data;\n  return options;\n};\n\nexports.mergeObjects = function(obj1, obj2) {\n  var combinedObj = {};\n  Object.keys(obj1).forEach(key => (combinedObj[key] = obj1[key]));\n  Object.keys(obj2).forEach(key => (combinedObj[key] = obj2[key]));\n  return combinedObj;\n};\n\nexports.checkDefaults = function(\n  options,\n  type,\n  defaultOptions,\n  defaultHeaders\n) {\n  var newOptions = {};\n  Object.keys(defaultOptions).forEach(\n    key => (newOptions[key] = defaultOptions[key])\n  );\n  Object.keys(options).forEach(key => (newOptions[key] = options[key]));\n  if (!newOptions.init) newOptions.init = { method: type };\n  else newOptions.init.method = type;\n  if (!newOptions.init.headers) newOptions.init.headers = {};\n  newOptions = changeHeaders(newOptions, type, defaultHeaders);\n  return newOptions;\n};\nfunction changeHeaders(options, type, defaultHeaders) {\n  var header = {};\n  if (\n    !options.init.headers[\"Content-type\"] &&\n    (type === \"POST\" || type === \"PUT\")\n  ) {\n    header = {\n      \"Content-type\": \"application/json\"\n    };\n  }\n  Object.keys(defaultHeaders.ALL).forEach(\n    key => (header[key] = defaultHeaders.ALL[key])\n  );\n  Object.keys(defaultHeaders[type]).forEach(\n    key => (header[key] = defaultHeaders[type][key])\n  );\n  if (options.init.headers)\n    Object.keys(options.init.headers).forEach(\n      key => (header[key] = options.init.headers[key])\n    );\n  if (Object.keys(header).length > 0) {\n    options.init.headers = header;\n  }\n  return options;\n}\n\nexports.createUrl = function(url, options) {\n  if (options.params) {\n    if (url[url.length - 1] !== \"/\") {\n      url = url + \"/\";\n    }\n    url = url + createQueryString(options.params);\n  }\n  return url;\n};\n\nfunction createQueryString(params) {\n  var queryString = \"?\";\n  var keys = Object.keys(params);\n  for (var i = 0; i < keys.length; i++) {\n    if (i === keys.length - 1)\n      queryString += keys[i] + \"=\" + params[keys[i]] + \"&\";\n    else queryString = queryString + keys[i] + \"=\" + params[keys[i]] + \"&\";\n  }\n  queryString = queryString.substring(0, queryString.length - 1);\n  return queryString;\n}\n\nexports.checkValidType = function(type) {\n  if (\n    type !== \"arrayBuffer\" &&\n    type !== \"blob\" &&\n    type !== \"formData\" &&\n    type !== \"json\" &&\n    type !== \"text\" &&\n    type !== \"auto\"\n  )\n    return false;\n  else return true;\n};\n\nexports.checkIfValidCredentials = function(mode) {\n  return mode === \"omit\" || mode === \"same-origin\" || mode === \"include\";\n};\n\nexports.timeoutPromise = function(ms, promise) {\n  return new Promise((resolve, reject) => {\n    const timeoutId = setTimeout(() => {\n      reject(new Error(\"Request Timeout\"));\n    }, ms);\n    promise.then(\n      res => {\n        clearTimeout(timeoutId);\n        resolve(res);\n      },\n      err => {\n        clearTimeout(timeoutId);\n        reject(err);\n      }\n    );\n  });\n};\n\nexports.resolveDataType = function(response) {\n  var type = response.headers.get(\"content-type\");\n  switch (type) {\n    case \"application/json\":\n      return \"json\";\n    case \"text/html\":\n      return \"text\";\n    case \"text/plain\":\n      return \"text\";\n    case \"text/javascript\":\n      return \"text\";\n    case \"multipart/form-data\":\n      return \"formData\";\n    default:\n      if (!type || !(type instanceof String)) {\n        return \"none\";\n      }\n      if (\n        type.includes(\"image\") ||\n        type.includes(\"audio\") ||\n        type.includes(\"video\")\n      ) {\n        return \"blob\";\n      }\n  }\n};\n\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n","const {\n  handleResponse,\n  handleNetworkResponse,\n  handleCacheResponse\n} = require(\"./responseHandler\");\n\nconst {\n  checkValidType,\n  checkIfValidCredentials,\n  createUrl,\n  timeoutPromise,\n  checkDefaults,\n  prepareData,\n  mergeObjects\n} = require(\"./utils\");\n\nvar exports = (module.exports = {});\nvar cacheName = \"\";\nvar defaultHeaders = {\n  GET: {},\n  POST: {},\n  PUT: {},\n  DELETE: {},\n  ALL: {}\n};\nvar defaultOptions = {\n  timeout: 5000,\n  init: { credentials: \"same-origin\" },\n  dataType: \"auto\"\n};\n\nexports.setCacheName = function(name) {\n  cacheName = name;\n};\n\nexports.getCacheName = function() {\n  return cacheName;\n};\n\nexports.setDefaultHeaders = function(headers, type) {\n  defaultHeaders[type] = headers;\n};\n\nexports.getDefaultHeaders = function(type) {\n  return defaultHeaders[type];\n};\n\nexports.setDefaultOptions = function(options) {\n  verifyOptions(options);\n  defaultOptions = mergeObjects(options, defaultOptions);\n};\n\n/*\nurl:\nSet to the destination that you want to fetch data from.\noptions:\nmatchAll - Set flag true to match all responses in the cache instead of first hit\ndataType - Types include: \"json\", \"blob\", \"formData\", \"arrayBuffer\", \"text\", \"raw\"\ninit - Pass through init object to fetch call manually.\ntimeout - timeout (in ms) to set on the api call.\nhandleCachedResponse - Manually specify a function to be used only for returned cached data.\nhandleNetworkResponse - Manually specify a function to be used only for returned network data.\nuseCache - Flag to check cache and return\nparams - query parameters to pass in\ncallback:\nThe function to be called with data as it is received. Expect this function to be called multiple times given that it will likely first be called with cache data and then called with updated network data. \nDo not rely on it being called twice however given that it won't be called a second time if network data returns first or cache data does not exist\n*/\nexports.get = function(url, options = defaultOptions, callback) {\n  if (url === undefined) {\n    return Promise.reject(new Error(\"Missing url parameter in get request\"));\n  }\n  if (options.mock) {\n    return options.mock;\n  }\n\n  options = checkDefaults(options, \"GET\", defaultOptions, defaultHeaders);\n  if (options.dataType && !checkValidType(options.dataType))\n    return Promise.reject(new Error(\"Invalid data type\"));\n  url = createUrl(url, options);\n  options.url = url;\n\n  // fetch fresh data\n  var networkCall = null;\n  if (!options.jsonp) {\n    networkCall = timeoutPromise(options.timeout, fetch(url, options.init))\n      .then(function(response) {\n        return handleResponse(response, options.validator);\n      })\n      .then(function(response) {\n        return handleNetworkResponse(response, options, callback);\n      });\n  } else {\n    networkCall = jsonp(url, options.timeout).then(function(data) {\n      if (options.callback instanceof Function) callback(data);\n      return Promise.resolve(data);\n    });\n  }\n\n  // fetch cached data\n  if (options.useLocalData instanceof Function)\n    callback(options.useLocalData(new Request(url, options.init)));\n  else if (options.useCache)\n    checkCaches(url, options, callback).catch(function() {\n      //Don't throw error on cache miss since this is expected behavior\n    });\n\n  return networkCall;\n};\n\n/*\noptions:\ninit - init to pass through to fetch\nTakes in a string or a json object to stringify.\n*/\nexports.post = function(url, data, options = defaultOptions) {\n  options = prepareData(data, options, \"POST\", defaultOptions, defaultHeaders);\n\n  return timeoutFetch(url, options);\n};\n\n/*\noptions:\ninit - init to pass through to fetch\n*/\nexports.put = function(url, data, options = defaultOptions) {\n  options = prepareData(data, options, \"PUT\", defaultOptions, defaultHeaders);\n\n  return timeoutFetch(url, options);\n};\n\nexports.delete = function(url, options = defaultOptions) {\n  options = checkDefaults(options, \"DELETE\", defaultOptions, defaultHeaders);\n\n  return timeoutFetch(url, options);\n};\n\nexports.createUrl = createUrl;\n\nfunction timeoutFetch(url, options) {\n  url = createUrl(url, options);\n  return timeoutPromise(options.timeout, fetch(url, options.init)).then(\n    function(response) {\n      if (!response.ok) {\n        throw response;\n      } else {\n        return response;\n      }\n    }\n  );\n}\n\nfunction checkCaches(url, options, callback) {\n  if (!options.matchAll) {\n    return caches\n      .match(url)\n      .then(handleResponse)\n      .then(function(response) {\n        return handleCacheResponse(response, options, callback);\n      });\n  } else {\n    return caches\n      .match(url) //.matchAll(url)\n      .then(handleResponse)\n      .then(function(response) {\n        return handleCacheResponse(response, options, callback);\n      });\n  }\n}\n\nfunction verifyOptions(options) {\n  if (options.dataType && !checkValidType(options.dataType))\n    throw new Error(\"Attempting to set invalid data type\");\n  if (options.timeout && isNaN(options.timeout))\n    throw new Error(\"Timeout must be a number (in ms)\");\n  if (options.init && !(options.init instanceof Object))\n    throw new Error(\"Init propery must be a json object\");\n  if (\n    options.init &&\n    options.init.credentials &&\n    !checkIfValidCredentials(options.init.credentials)\n  )\n    throw new Error(\"Attempting to set invalid credential policy\");\n  if (options.validator && !(options.validator instanceof Function))\n    throw new Error(\"Validator must be a function\");\n}\n\nfunction jsonp(url, timeout) {\n  return new Promise(function(resolve, reject) {\n    let script = document.createElement(\"script\");\n    const name = \"_jsonp_\" + Math.round(100000 * Math.random());\n    //url formatting\n    if (url.match(/\\?/)) url += \"&callback=\" + name;\n    else url += \"?callback=\" + name;\n    script.src = url;\n\n    window[name] = function(data) {\n      resolve(data);\n      document.body.removeChild(script);\n      delete window[name];\n    };\n    document.body.appendChild(script);\n    setTimeout(() => {\n      reject(new Error(\"Timeout on jsonp request\"));\n      document.body.removeChild(script);\n      delete window[name];\n    }, timeout);\n  });\n}\n","const { resolveDataType } = require(\"./utils\");\nvar networkMap = new Map();\nvar cacheMap = new Map();\n\nexports.handleResponse = function(response, validator) {\n  if (!response) {\n    return new Promise(function(resolve, reject) {\n      reject(\"No response\");\n    });\n  }\n  if (validator && !validator(response)) {\n    throw response;\n  } else if (!validator && !response.ok) {\n    throw response;\n  } else {\n    return response;\n  }\n};\n\nexports.handleNetworkResponse = function(response, options, callback) {\n  if (!options.useCache) {\n    return parseResponseData(response, options);\n  }\n  if (options.dataType.toLowerCase() === \"none\") {\n    setNetworkMap(options.url);\n    if (options.handleNetworkResponse instanceof Function)\n      options.handleNetworkResponse(response);\n    else callback(response);\n    return;\n  }\n  return handleNetworkResponseData(response, options, callback).then(function(\n    data\n  ) {\n    setNetworkMap(options.url);\n    Promise.resolve(data);\n  });\n};\n\nexports.handleCacheResponse = function(response, options, callback) {\n  //Don't overwrite network data with cached data\n  if (networkMap.get(options.url)) {\n    networkMap.delete(options.url);\n    return;\n  }\n  if (options.dataType.toLowerCase() === \"none\") {\n    cacheMap.set(options.url, true);\n    if (options.handleCachedResponse instanceof Function)\n      options.handleCachedResponse(response);\n    else callback(response); ///Implement object comparison?\n  } else {\n    return handleCacheResponseData(response, options, callback).then(function(\n      data\n    ) {\n      cacheMap.set(options.url, true);\n      return Promise.resolve(data);\n    });\n  }\n};\n\nfunction handleNetworkResponseData(response, options, callback) {\n  parseResponseData(response, options).then(function(data) {\n    networkMap.set(options.url, true);\n    if (options.handleNetworkResponse instanceof Function)\n      options.handleNetworkResponse(data);\n    else callback(data); ///Implement object comparison?\n  });\n}\n\nfunction handleCacheResponseData(response, options, callback) {\n  return parseResponseData(response, options).then(function(data) {\n    if (options.handleCachedResponse instanceof Function)\n      options.handleCachedResponse(data);\n    else callback(data); ///Implement object comparison?\n  });\n}\n\nfunction parseResponseData(response, options) {\n  switch (options.dataType.toLowerCase()) {\n    case \"json\":\n      return response.json();\n    case \"blob\":\n      return response.blob();\n    case \"arraybuffer\":\n      return response.arrayBuffer();\n    case \"formdata\":\n      return response.formData();\n    case \"text\":\n      return response.text();\n    case \"auto\":\n      options.dataType = resolveDataType(response);\n      return parseResponseData(response, options);\n    default:\n      return Promise.resolve(response);\n  }\n}\n\nfunction setNetworkMap(url) {\n  if (!cacheMap.get(url)) networkMap.set(url, true);\n  else cacheMap.delete(url);\n}\n"],"sourceRoot":""}